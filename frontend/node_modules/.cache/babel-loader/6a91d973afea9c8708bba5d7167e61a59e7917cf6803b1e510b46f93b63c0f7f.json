{"ast":null,"code":"// utils/axios.js\nimport axios from'axios';// Create axios instance\nconst api=axios.create({// Backend base URL — now includes /api so you can just call api.get('/auth/login')\nbaseURL:process.env.REACT_APP_API_URL||'http://13.234.168.116:5000/api',withCredentials:true,// needed for cookie/session-based auth\nheaders:{'Content-Type':'application/json'},timeout:10000// 10s timeout to avoid hanging requests\n});// ----- Request Interceptor -----\napi.interceptors.request.use(config=>{try{const token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}}catch(err){if(process.env.NODE_ENV!=='production'){console.warn('Unable to read token from localStorage:',err);}}return config;},error=>Promise.reject(error));// ----- Response Interceptor -----\napi.interceptors.response.use(response=>response,error=>{if(process.env.NODE_ENV!=='production'){console.error('API Error:',error);if(error.response){console.error('Response data:',error.response.data);console.error('Response status:',error.response.status);}else{console.error('Network/CORS error or no response:',error.message);}}// Handle 401 Unauthorized globally (optional)\nif(error.response&&error.response.status===401){console.warn('Unauthorized — clearing token and redirecting to login');localStorage.removeItem('token');localStorage.removeItem('user');window.location.href='/login';}return Promise.reject(error);});export default api;","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","withCredentials","headers","timeout","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","err","NODE_ENV","console","warn","error","Promise","reject","response","data","status","message","removeItem","window","location","href"],"sources":["/home/ubuntu/application/frontend/src/utils/axios.js"],"sourcesContent":["// utils/axios.js\nimport axios from 'axios';\n\n// Create axios instance\nconst api = axios.create({\n  // Backend base URL — now includes /api so you can just call api.get('/auth/login')\n  baseURL: process.env.REACT_APP_API_URL || 'http://13.234.168.116:5000/api',\n  withCredentials: true, // needed for cookie/session-based auth\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  timeout: 10000 // 10s timeout to avoid hanging requests\n});\n\n// ----- Request Interceptor -----\napi.interceptors.request.use(\n  (config) => {\n    try {\n      const token = localStorage.getItem('token');\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n    } catch (err) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('Unable to read token from localStorage:', err);\n      }\n    }\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n// ----- Response Interceptor -----\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (process.env.NODE_ENV !== 'production') {\n      console.error('API Error:', error);\n      if (error.response) {\n        console.error('Response data:', error.response.data);\n        console.error('Response status:', error.response.status);\n      } else {\n        console.error('Network/CORS error or no response:', error.message);\n      }\n    }\n\n    // Handle 401 Unauthorized globally (optional)\n    if (error.response && error.response.status === 401) {\n      console.warn('Unauthorized — clearing token and redirecting to login');\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      window.location.href = '/login';\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB;AACA,KAAM,CAAAC,GAAG,CAAGD,KAAK,CAACE,MAAM,CAAC,CACvB;AACAC,OAAO,CAAEC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,gCAAgC,CAC1EC,eAAe,CAAE,IAAI,CAAE;AACvBC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,OAAO,CAAE,KAAM;AACjB,CAAC,CAAC,CAEF;AACAR,GAAG,CAACS,YAAY,CAACC,OAAO,CAACC,GAAG,CACzBC,MAAM,EAAK,CACV,GAAI,CACF,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACTD,MAAM,CAACL,OAAO,CAACS,aAAa,WAAAC,MAAA,CAAaJ,KAAK,CAAE,CAClD,CACF,CAAE,MAAOK,GAAG,CAAE,CACZ,GAAIf,OAAO,CAACC,GAAG,CAACe,QAAQ,GAAK,YAAY,CAAE,CACzCC,OAAO,CAACC,IAAI,CAAC,yCAAyC,CAAEH,GAAG,CAAC,CAC9D,CACF,CACA,MAAO,CAAAN,MAAM,CACf,CAAC,CACAU,KAAK,EAAKC,OAAO,CAACC,MAAM,CAACF,KAAK,CACjC,CAAC,CAED;AACAtB,GAAG,CAACS,YAAY,CAACgB,QAAQ,CAACd,GAAG,CAC1Bc,QAAQ,EAAKA,QAAQ,CACrBH,KAAK,EAAK,CACT,GAAInB,OAAO,CAACC,GAAG,CAACe,QAAQ,GAAK,YAAY,CAAE,CACzCC,OAAO,CAACE,KAAK,CAAC,YAAY,CAAEA,KAAK,CAAC,CAClC,GAAIA,KAAK,CAACG,QAAQ,CAAE,CAClBL,OAAO,CAACE,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAACG,QAAQ,CAACC,IAAI,CAAC,CACpDN,OAAO,CAACE,KAAK,CAAC,kBAAkB,CAAEA,KAAK,CAACG,QAAQ,CAACE,MAAM,CAAC,CAC1D,CAAC,IAAM,CACLP,OAAO,CAACE,KAAK,CAAC,oCAAoC,CAAEA,KAAK,CAACM,OAAO,CAAC,CACpE,CACF,CAEA;AACA,GAAIN,KAAK,CAACG,QAAQ,EAAIH,KAAK,CAACG,QAAQ,CAACE,MAAM,GAAK,GAAG,CAAE,CACnDP,OAAO,CAACC,IAAI,CAAC,wDAAwD,CAAC,CACtEP,YAAY,CAACe,UAAU,CAAC,OAAO,CAAC,CAChCf,YAAY,CAACe,UAAU,CAAC,MAAM,CAAC,CAC/BC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,QAAQ,CACjC,CAEA,MAAO,CAAAT,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC9B,CACF,CAAC,CAED,cAAe,CAAAtB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}